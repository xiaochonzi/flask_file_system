!function(t){"use strict";function e(t,e){b.debug&&window.console&&console[e?"error":"log"](t)}function n(t){return"undefined"==typeof t||null===t||!t.length}function o(t){var e=/\./.test(1.1.toLocaleString())?".":",",n=new RegExp("\\"+e+"\\d+$");return Math.round(t).toLocaleString().replace(n,"")}function r(t,e,n,o){var i=e.split(" ");if(t instanceof NodeList)for(var a=0;a<t.length;a++)t[a]instanceof Node&&r(t[a],arguments[1],arguments[2],arguments[3]);else for(var c=0;c<i.length;c++)t[o?"addEventListener":"removeEventListener"](i[c],n,!1)}function i(t,e,n){t&&r(t,e,n,!0)}function a(t,e){for(var n in e)e[n]&&e[n].constructor&&e[n].constructor===Object?(t[n]=t[n]||{},a(t[n],e[n])):t[n]=e[n];return t}function c(t,e){if(e.network in b.popup){t.preventDefault();var n=b.popup[e.network],o=e.link.href,r=n.width,i=n.height,a=e.network;if(window["window-"+a]&&!window["window-"+a].closed)window["window-"+a].focus();else{var c=void 0!==window.screenLeft?window.screenLeft:screen.left,u=void 0!==window.screenTop?window.screenTop:screen.top,s=screen.width/2-r/2+c,l=screen.height/2-i/2+u;window["window-"+a]=window.open(o,a,"top="+l+",left="+s+",width="+r+",height="+i),window["window-"+a].focus()}}}function u(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=n.exec(t);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}function s(t,e){var n="jsonp_callback_"+Math.round(1e5*Math.random());window[n]=function(t){delete window[n],document.body.removeChild(o),e(t)};var o=document.createElement("script");o.setAttribute("src",t+(t.indexOf("?")>=0?"&":"?")+"callback="+n),document.body.appendChild(o)}function l(){b.storage.enabled&&b.storage.key in window.localStorage&&(v={data:JSON.parse(window.localStorage[b.storage.key]),ttl:window.localStorage[b.storage.key+"_ttl"]})}function d(t){b.storage.enabled&&(window.localStorage[b.storage.key]=JSON.stringify(t),window.localStorage[b.storage.key+"_ttl"]=Date.now()+b.storage.ttl)}function f(t){switch(t.network){case"facebook":return u(t.link.search,"u");case"github":return t.link.pathname;default:return u(t.link.search,"url")}}function w(t){if(!(t.network in b.urls))return null;switch(t.network){case"github":return b.urls[t.network](f(t),b.tokens.github);default:return b.urls[t.network](encodeURIComponent(t.url))}}function h(t,e){if(b.storage.enabled){var o=f(t);if(o in v.data&&t.network in v.data[o]&&v.ttl>Date.now())return void e(v.data[o][t.network])}var r=w(t);n(r)||s(r,function(n){b.storage.enabled&&(o in v.data||(v.data[o]={}),v.data[o][t.network]=n,d(v.data)),e(n)})}function g(t,e){return t in b.count.prefix?e[b.count.prefix[t]]:e}function p(t,e){var r,i,a=t.link.getAttribute("data-shr-display");e=g(t.network,e),r=n(a)?t.network in b.count.value?e[b.count.value[t.network]]:e.count:e[a],t.count="number"==typeof r?r:0,i=t.count,i=b.count.format&&t.count>1e6?Math.round(t.count/1e6)+"M":b.count.format&&t.count>1e3?Math.round(t.count/1e3)+"K":o(t.count),(t.count>0||b.count.displayZero)&&t.link.insertAdjacentHTML("after"===b.count.position?"afterend":"beforebegin",b.count.html(i,b.count.classname))}function k(t){var n=this;return"undefined"==typeof t?(e("No share link found.",!0),!1):(n.link=t,n.network=t.getAttribute("data-shr-network"),n.url=f(n),h(n,function(t){p(n,t)}),i(n.link,"click",function(t){c(t,n)}),n)}var b,v={data:{},ttl:0},m={selector:"[data-shr-network]",count:{classname:"share-count",displayZero:!0,format:!1,position:"after",html:function(t,e){return'<span class="'+e+'">'+t+"</span>"},value:{facebook:"shares",github:"stargazers_count"},prefix:{github:"data"}},urls:{facebook:function(t){return"https://graph.facebook.com/?id="+t},pinterest:function(t){return"https://widgets.pinterest.com/v1/urls/count.json?url="+t},github:function(t,e){return"https://api.github.com/repos"+t+("string"==typeof e?"?access_token="+e:"")}},popup:{google:{width:500,height:500},facebook:{width:640,height:270},twitter:{width:640,height:240},pinterest:{width:750,height:550}},storage:{key:"shr",enabled:"localStorage"in window&&null!==window.localStorage,ttl:3e5},tokens:{}};t.setup=function(t,e){"string"==typeof t?t=document.querySelectorAll(t):t instanceof HTMLElement?t=[t]:t instanceof NodeList||"string"==typeof t||("undefined"==typeof e&&"object"==typeof t&&(e=t),t=document.querySelectorAll(m.selector)),b=a(m,e),l();for(var n=t.length-1;n>=0;n--){var o=t[n];if("undefined"==typeof o.shr){var r=new k(o);o.shr=Object.keys(r).length?r:!1}}}}(this.shr=this.shr||{});